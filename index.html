<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LIFF Send Message</title>
  <script src="https://static.line-scdn.net/liff/edge/2.1/sdk.js"></script>
</head>
<body>
  <h1>LIFF メッセージ送信</h1>
  <button id="sendMessageButton">メッセージを送信</button>

  <script>
    // LIFF 初期化
document.addEventListener('DOMContentLoaded', function () {
  liff.init({ liffId: "2006793281-ByopxRG5" }) // あなたの LIFF ID に置き換え
    .then(() => {
      console.log('LIFF initialized');
      setupButton();
    })
    .catch(err => {
      console.error('LIFF initialization failed', err);
    });
});

function setupButton() {
  const sendMessageButton = document.getElementById('sendMessageButton');
  sendMessageButton.addEventListener('click', () => {
    if (liff.isLoggedIn()) {
      sendMessage();
    } else {
      liff.login();
    }
  });
}

function sendMessage() {
  liff.sendMessages([{
    type: 'text',
    text: 'こんにちは！LIFFを使ってメッセージを送信しています。'
  }])
    .then(() => {
      alert('メッセージが送信されました！');
      liff.closeWindow();
    })
    .catch(err => {
      console.error('メッセージ送信失敗:', err);
    });
}

  </script>
</body>
</html>
